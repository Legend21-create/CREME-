<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Creme Theory | Master Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-stone-100 p-4 md:p-8 font-sans">
    <div class="max-w-2xl mx-auto bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-stone-200">
        
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-amber-900 uppercase tracking-tighter">Inventory Manager</h1>
            <span class="bg-amber-100 text-amber-800 text-[10px] font-bold px-2 py-1 rounded">MASTER CONTROL</span>
        </div>

        <div class="mb-8 p-4 bg-amber-50 rounded-xl border border-amber-100">
            <h2 class="text-xs font-bold uppercase tracking-widest text-amber-800 mb-3">Add New Menu Item</h2>
            <div class="flex flex-col md:flex-row gap-3">
                <input type="text" id="new-name" placeholder="Item Name (e.g. Lemon Tart)" class="flex-1 p-2 text-sm border rounded focus:ring-1 focus:ring-amber-900 outline-none">
                <input type="number" id="new-price" placeholder="Price" class="w-full md:w-24 p-2 text-sm border rounded focus:ring-1 focus:ring-amber-900 outline-none">
                <button onclick="addNewItem()" class="bg-amber-900 text-white px-4 py-2 rounded text-sm font-bold hover:bg-amber-800 transition">Add Item</button>
            </div>
        </div>
        
        <div id="admin-list" class="space-y-3 mb-8">
            </div>

        <div class="border-t border-stone-200 pt-6">
            <div class="flex justify-between items-end mb-4">
                <h2 class="text-xs font-bold uppercase tracking-widest text-stone-400">Export Configuration</h2>
                <button onclick="copyCode()" class="text-xs bg-stone-800 text-white px-3 py-1.5 rounded-md hover:bg-black transition">
                    Copy to Clipboard
                </button>
            </div>
            <textarea id="output-code" readonly class="w-full h-48 p-4 bg-stone-900 text-green-400 text-[10px] font-mono rounded-lg focus:outline-none border-2 border-stone-800"></textarea>
        </div>
    </div>

    <script src="inventory.js"></script>

    <script>
        // Use local copy of inventory to allow additions
        let inventory = window.CremeInventory || {};

        function render() {
            const listContainer = document.getElementById('admin-list');
            listContainer.innerHTML = '';
            
            for (const [name, data] of Object.entries(inventory)) {
                const row = document.createElement('div');
                row.className = `flex flex-col md:flex-row md:items-center justify-between p-4 rounded-xl border transition ${data.inStock ? 'bg-white border-stone-200 shadow-sm' : 'bg-stone-50 border-stone-100'}`;
                
                row.innerHTML = `
                    <div class="mb-3 md:mb-0">
                        <div class="font-bold text-stone-800">${name}</div>
                        <button onclick="removeItem('${name}')" class="text-[9px] text-red-400 hover:text-red-600 uppercase font-bold tracking-tighter">Remove Item</button>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <div class="flex items-center bg-stone-100 rounded-lg px-2 py-1 border border-stone-200">
                            <span class="text-stone-400 text-xs">$</span>
                            <input type="number" value="${data.price}" onchange="updatePrice('${name}', this.value)" class="bg-transparent font-semibold text-amber-900 w-16 focus:outline-none text-sm ml-1">
                        </div>

                        <button onclick="toggle('${name}')" class="w-24 py-2 rounded-lg text-[10px] font-black transition ${data.inStock ? 'bg-green-500 text-white shadow-md' : 'bg-stone-300 text-stone-600'}">
                            ${data.inStock ? 'IN STOCK' : 'SOLD OUT'}
                        </button>
                    </div>
                `;
                listContainer.appendChild(row);
            }
            generateCode();
        }

        function addNewItem() {
            const name = document.getElementById('new-name').value.trim();
            const price = parseInt(document.getElementById('new-price').value);

            if (name && price) {
                inventory[name] = { inStock: true, price: price };
                document.getElementById('new-name').value = '';
                document.getElementById('new-price').value = '';
                render();
            } else {
                alert("Please enter both a name and a price.");
            }
        }

        function removeItem(name) {
            if(confirm(`Are you sure you want to remove ${name}?`)) {
                delete inventory[name];
                render();
            }
        }

        function toggle(name) {
            inventory[name].inStock = !inventory[name].inStock;
            render();
        }

        function updatePrice(name, newPrice) {
            inventory[name].price = parseInt(newPrice);
            generateCode();
        }

        function generateCode() {
            const code = `const InventoryData = ${JSON.stringify(inventory, null, 4)};\n\nwindow.CremeInventory = InventoryData;`;
            document.getElementById('output-code').value = code;
        }

        function copyCode() {
            const output = document.getElementById('output-code');
            output.select();
            document.execCommand('copy');
            alert("Success! Now paste this into your inventory.js file.");
        }

        window.onload = render;
    </script>
</body>
</html>
