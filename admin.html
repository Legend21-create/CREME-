<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Creme Theory | Master Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-stone-100 p-4 md:p-8 font-sans">
    <div class="max-w-2xl mx-auto bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-stone-200">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-amber-900 uppercase tracking-tighter">Inventory & Prices</h1>
            <span class="bg-amber-100 text-amber-800 text-[10px] font-bold px-2 py-1 rounded">ADMIN MODE</span>
        </div>
        
        <p class="mb-8 text-sm text-stone-500 italic">Adjust stock and prices below, then update your <b>inventory.js</b> file.</p>
        
        <div id="admin-list" class="space-y-3 mb-8">
            </div>

        <div class="border-t border-stone-200 pt-6">
            <div class="flex justify-between items-end mb-4">
                <h2 class="text-xs font-bold uppercase tracking-widest text-stone-400">Export Configuration</h2>
                <button onclick="copyCode()" class="text-xs bg-amber-900 text-white px-3 py-1.5 rounded-md hover:bg-amber-800 transition">
                    Copy Code
                </button>
            </div>
            <textarea id="output-code" readonly class="w-full h-48 p-4 bg-stone-900 text-green-400 text-[10px] font-mono rounded-lg focus:outline-none border-2 border-stone-800"></textarea>
            <p class="mt-2 text-[10px] text-stone-400 text-center">After copying, paste this into your <b>inventory.js</b> file to go live.</p>
        </div>
    </div>

    <script src="inventory.js"></script>

    <script>
        const inventory = window.CremeInventory;
        const listContainer = document.getElementById('admin-list');
        const output = document.getElementById('output-code');

        function render() {
            listContainer.innerHTML = '';
            for (const [name, data] of Object.entries(inventory)) {
                const row = document.createElement('div');
                row.className = `flex flex-col md:flex-row md:items-center justify-between p-4 rounded-xl border transition ${data.inStock ? 'bg-white border-stone-200 shadow-sm' : 'bg-stone-50 border-stone-100'}`;
                
                row.innerHTML = `
                    <div class="mb-3 md:mb-0">
                        <div class="font-bold text-stone-800">${name}</div>
                        <div class="text-[10px] text-stone-400 uppercase tracking-wide">${data.inStock ? 'Available' : 'Sold Out'}</div>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <div class="flex items-center bg-stone-100 rounded-lg px-3 py-1 border border-stone-200">
                            <span class="text-stone-400 text-sm mr-1">$</span>
                            <input type="number" 
                                   value="${data.price}" 
                                   onchange="updatePrice('${name}', this.value)"
                                   class="bg-transparent font-semibold text-amber-900 w-20 focus:outline-none text-sm">
                            <span class="text-stone-400 text-[10px] ml-1">JMD</span>
                        </div>

                        <button onclick="toggle('${name}')" 
                                class="w-24 py-2 rounded-lg text-[10px] font-black transition ${data.inStock ? 'bg-green-500 text-white shadow-md' : 'bg-stone-300 text-stone-600'}">
                            ${data.inStock ? 'IN STOCK' : 'SOLD OUT'}
                        </button>
                    </div>
                `;
                listContainer.appendChild(row);
            }
            generateCode();
        }

        function toggle(name) {
            inventory[name].inStock = !inventory[name].inStock;
            render();
        }

        function updatePrice(name, newPrice) {
            inventory[name].price = parseInt(newPrice);
            generateCode(); // Update the code block without re-rendering the whole list
        }

        function generateCode() {
            const code = `const InventoryData = ${JSON.stringify(inventory, null, 4)};\n\nwindow.CremeInventory = InventoryData;`;
            output.value = code;
        }

        function copyCode() {
            output.select();
            document.execCommand('copy');
            alert("Success! Code copied to clipboard.\n\nNow update your inventory.js file.");
        }

        window.onload = render;
    </script>
</body>
</html>
