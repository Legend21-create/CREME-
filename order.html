<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="https://fav.farm/ðŸ¥">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Orders | Creme Theory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        body { font-family: 'DM Sans', sans-serif; scroll-behavior: smooth; }
        h1, h2 { font-family: 'Playfair Display', serif; }

        /* Date picker icon color */
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(21%) sepia(90%) saturate(1251%) hue-rotate(18deg) brightness(92%) contrast(101%);
            cursor: pointer;
        }

        /* Mobile menu */
        #mobile-menu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.35s ease;
        }
        #mobile-menu.open { max-height: 300px; }

        /* Toast */
        #toast {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #1c1917;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 999px;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            z-index: 9999;
            transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
            opacity: 0;
            white-space: nowrap;
            pointer-events: none;
        }
        #toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* Focus styles */
        input:focus, textarea:focus, select:focus {
            outline: none;
            ring: 2px;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 border-t-4 border-amber-900">

    <!-- â”€â”€ NAV â”€â”€ -->
    <nav class="sticky top-0 z-50 bg-stone-50/90 backdrop-blur-md border-b border-stone-100">
        <div class="flex justify-between items-center px-6 py-4 max-w-7xl mx-auto">
            <a href="index.html" class="text-2xl font-bold tracking-tighter text-amber-900 uppercase">Creme Theory</a>

            <!-- Desktop links -->
            <div class="hidden md:flex space-x-8 font-medium items-center">
                <a href="menu.html" class="hover:text-amber-700 transition">Menu</a>
                <a href="story.html" class="hover:text-amber-700 transition">Our Story</a>
                <a href="order.html" class="font-bold text-amber-900 underline decoration-2 underline-offset-8">Custom Orders</a>
            </div>

            <div class="flex items-center gap-4">
                <!-- Cart -->
                <a href="cart.html" class="relative cursor-pointer flex items-center hover:opacity-75 transition">
                    <span class="text-xl">ðŸ›’</span>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-amber-900 text-white text-[10px] rounded-full px-1.5 py-0.5 font-bold min-w-[18px] text-center">0</span>
                </a>
                <!-- Join Now -->
                <a href="index.html#newsletter" class="hidden sm:inline-block bg-amber-900 text-white px-4 py-2 rounded-full hover:bg-amber-800 transition text-xs font-semibold">Join Now</a>
                <!-- Hamburger -->
                <button id="menu-toggle" class="md:hidden flex flex-col gap-1.5 cursor-pointer" aria-label="Toggle navigation">
                    <span class="block w-6 h-0.5 bg-stone-800 transition-all" id="bar1"></span>
                    <span class="block w-6 h-0.5 bg-stone-800 transition-all" id="bar2"></span>
                    <span class="block w-4 h-0.5 bg-stone-800 transition-all" id="bar3"></span>
                </button>
            </div>
        </div>

        <!-- Mobile dropdown -->
        <div id="mobile-menu" class="md:hidden border-t border-stone-100 bg-stone-50">
            <div class="flex flex-col px-6 py-4 space-y-4 text-sm font-medium">
                <a href="menu.html" class="hover:text-amber-700 transition">Menu</a>
                <a href="story.html" class="hover:text-amber-700 transition">Our Story</a>
                <a href="order.html" class="text-amber-900 font-bold">Custom Orders</a>
                <a href="index.html#newsletter" class="text-amber-900 font-semibold">Join Now</a>
            </div>
        </div>
    </nav>

    <!-- â”€â”€ HEADER â”€â”€ -->
    <main class="max-w-3xl mx-auto px-6 py-12">
        <div class="text-center mb-12">
            <p class="text-xs uppercase tracking-[0.3em] text-amber-700 mb-4 font-medium">Made to order</p>
            <h1 class="text-5xl text-amber-950 mb-4">Custom Inquiry</h1>
            <p class="text-stone-500 italic text-lg">Handcrafted designs for your most significant moments.</p>
        </div>

        <!-- â”€â”€ FORM â”€â”€ -->
        <form action="https://formspree.io/f/mvzbzywl" method="POST" id="order-form" novalidate class="space-y-8 bg-white p-8 md:p-10 rounded-2xl shadow-sm border border-stone-100">
            <input type="hidden" name="_next" value="https://legend21-create.github.io/CREME-/success.html">
            <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off">

            <!-- â”€â”€ CART SUMMARY (shown if items exist) â”€â”€ -->
            <div id="cart-display" class="hidden bg-stone-50 p-6 rounded-xl border border-amber-100">
                <h2 class="text-xs uppercase tracking-widest font-bold text-amber-900 mb-4">Included from Menu</h2>
                <div id="cart-items-list" class="space-y-3 text-sm text-stone-600"></div>
                <textarea name="cart_summary" id="cart-summary-hidden" class="hidden" readonly></textarea>

                <div class="mt-6 flex justify-between items-center border-t border-stone-200 pt-4">
                    <button type="button" onclick="clearCart()" class="text-[10px] uppercase tracking-widest font-bold text-stone-400 hover:text-red-600 transition cursor-pointer">Clear Selection</button>
                    <span class="font-bold text-amber-950 text-sm">Subtotal: <span id="cart-total-price">J$0</span></span>
                </div>
            </div>

            <!-- â”€â”€ NAME & EMAIL â”€â”€ -->
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="name" class="block text-[10px] uppercase tracking-widest font-bold mb-2">Full Name <span class="text-red-400">*</span></label>
                    <input type="text" id="name" name="name" required placeholder="Jane Doe"
                           class="w-full p-4 bg-stone-50 border border-stone-200 rounded-lg focus:ring-2 focus:ring-amber-900/30 focus:border-amber-900 outline-none transition">
                    <p class="error-msg text-red-500 text-xs mt-1 hidden">Please enter your full name.</p>
                </div>
                <div>
                    <label for="email" class="block text-[10px] uppercase tracking-widest font-bold mb-2">Email Address <span class="text-red-400">*</span></label>
                    <input type="email" id="email" name="email" required placeholder="email@example.com"
                           class="w-full p-4 bg-stone-50 border border-stone-200 rounded-lg focus:ring-2 focus:ring-amber-900/30 focus:border-amber-900 outline-none transition">
                    <p class="error-msg text-red-500 text-xs mt-1 hidden">Please enter a valid email address.</p>
                </div>
            </div>

            <!-- â”€â”€ DATE â”€â”€ -->
            <div>
                <label for="event-date" class="block text-[10px] uppercase tracking-widest font-bold mb-2">Event Date <span class="text-red-400">*</span></label>
                <input type="date" id="event-date" name="date" required
                       class="w-full p-4 bg-stone-50 border border-stone-200 rounded-lg focus:ring-2 focus:ring-amber-900/30 focus:border-amber-900 outline-none transition">
                <p class="error-msg text-red-500 text-xs mt-1 hidden">Please select a future date.</p>
                <p class="text-stone-400 text-xs mt-1">We require at least 7 days notice for custom orders.</p>
            </div>

            <!-- â”€â”€ INQUIRY DETAILS â”€â”€ -->
            <div>
                <label for="message" class="block text-[10px] uppercase tracking-widest font-bold mb-2">Inquiry Details <span class="text-red-400">*</span></label>
                <textarea id="message" name="message" rows="5" required
                          placeholder="Describe your dream cake or pastry needs (theme, colours, serving size, allergies)..."
                          class="w-full p-4 bg-stone-50 border border-stone-200 rounded-lg focus:ring-2 focus:ring-amber-900/30 focus:border-amber-900 outline-none transition resize-none"></textarea>
                <p class="error-msg text-red-500 text-xs mt-1 hidden">Please describe your inquiry.</p>
            </div>

            <!-- â”€â”€ SUBMIT â”€â”€ -->
            <button type="submit" id="submit-btn" class="w-full bg-amber-900 text-white py-5 rounded-lg font-bold uppercase tracking-widest hover:bg-amber-800 active:bg-amber-950 transition shadow-md cursor-pointer">
                Send Inquiry
            </button>
        </form>
    </main>

    <!-- â”€â”€ FOOTER â”€â”€ -->
    <footer class="bg-stone-900 text-stone-400 py-20 px-6 mt-20">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 border-b border-stone-800 pb-16 mb-12">
                <div class="col-span-1">
                    <h2 class="text-white text-2xl font-bold tracking-tighter mb-4 uppercase">Creme Theory</h2>
                    <p class="text-sm leading-relaxed">Artisanal excellence in every bite.</p>
                </div>
                <div>
                    <h4 class="text-white font-bold uppercase tracking-widest text-[10px] mb-6">Shop</h4>
                    <ul class="space-y-4 text-sm">
                        <li><a href="menu.html" class="hover:text-white transition">Full Menu</a></li>
                        <li><a href="order.html" class="hover:text-white transition">Custom Orders</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold uppercase tracking-widest text-[10px] mb-6">Support</h4>
                    <ul class="space-y-4 text-sm">
                        <li><a href="terms.html" class="hover:text-white transition font-bold text-amber-500 underline">Terms of Service</a></li>
                        <li><a href="story.html" class="hover:text-white transition">Our Story</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold uppercase tracking-widest text-[10px] mb-6">Delivery</h4>
                    <p class="text-xs">Serving St. Catherine & Kingston, Jamaica.</p>
                </div>
            </div>
            <p class="text-[10px] uppercase tracking-widest">Â© 2026 Creme Theory.</p>
        </div>
    </footer>

    <!-- â”€â”€ TOAST â”€â”€ -->
    <div id="toast"></div>

    <script>
        // â”€â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function getCart() {
            return JSON.parse(localStorage.getItem('creme_cart')) || [];
        }

        function parsePrice(val) {
            if (typeof val === 'number') return val;
            return parseFloat(String(val).replace(/[^0-9.]/g, '')) || 0;
        }

        // â”€â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        let toastTimer;
        function showToast(msg, duration = 3000) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            clearTimeout(toastTimer);
            toastTimer = setTimeout(() => toast.classList.remove('show'), duration);
        }

        // â”€â”€â”€ CART DISPLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function updateOrderDisplay() {
            const cart = getCart();
            const cartDisplay     = document.getElementById('cart-display');
            const cartItemsList   = document.getElementById('cart-items-list');
            const cartTotalPrice  = document.getElementById('cart-total-price');
            const cartSummary     = document.getElementById('cart-summary-hidden');
            const cartCountBadge  = document.getElementById('cart-count');

            // Update badge â€” use qty if present, consistent with menu.html
            const totalQty = cart.reduce((sum, i) => sum + (i.qty || 1), 0);
            cartCountBadge.innerText = totalQty;

            if (cart.length > 0) {
                cartDisplay.classList.remove('hidden');

                let total = 0;
                let listHtml = '';
                let summaryText = 'Items Selected:\n';

                cart.forEach(item => {
                    const price = parsePrice(item.price);
                    const qty   = item.qty || 1;
                    const lineTotal = price * qty;
                    total += lineTotal;

                    const qtyLabel = qty > 1 ? ` Ã—${qty}` : '';
                    listHtml += `
                        <div class="flex justify-between items-center">
                            <span>${item.name}${qtyLabel}</span>
                            <span class="font-bold text-amber-900">J$${lineTotal.toLocaleString()}</span>
                        </div>`;
                    summaryText += `- ${item.name}${qtyLabel} (J$${lineTotal.toLocaleString()})\n`;
                });

                cartItemsList.innerHTML = listHtml;
                cartTotalPrice.innerText = `J$${total.toLocaleString()}`;
                cartSummary.value = summaryText + `\nSubtotal: J$${total.toLocaleString()}`;
            } else {
                cartDisplay.classList.add('hidden');
                cartSummary.value = '';
            }
        }

        function clearCart() {
            if (confirm('Clear your menu selections?')) {
                localStorage.removeItem('creme_cart');
                updateOrderDisplay();
                showToast('ðŸ—‘ï¸ Cart cleared');
            }
        }

        // â”€â”€â”€ DATE VALIDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function setMinDate() {
            const dateInput = document.getElementById('event-date');
            // Minimum: 7 days from today
            const minDate = new Date();
            minDate.setDate(minDate.getDate() + 7);
            dateInput.min = minDate.toISOString().split('T')[0];
        }

        // â”€â”€â”€ FORM VALIDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function validateForm() {
            let valid = true;

            const fields = [
                { id: 'name',       check: v => v.trim().length >= 2,         msg: 'Please enter your full name.' },
                { id: 'email',      check: v => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v), msg: 'Please enter a valid email address.' },
                { id: 'event-date', check: v => {
                    if (!v) return false;
                    const min = new Date(); min.setDate(min.getDate() + 7);
                    return new Date(v) >= min;
                }, msg: 'Please select a date at least 7 days from today.' },
                { id: 'message',    check: v => v.trim().length >= 10,        msg: 'Please describe your inquiry (min. 10 characters).' }
            ];

            fields.forEach(({ id, check, msg }) => {
                const input = document.getElementById(id);
                const err   = input.nextElementSibling;
                if (!check(input.value)) {
                    input.classList.add('border-red-400');
                    if (err && err.classList.contains('error-msg')) {
                        err.textContent = msg;
                        err.classList.remove('hidden');
                    }
                    valid = false;
                } else {
                    input.classList.remove('border-red-400');
                    if (err && err.classList.contains('error-msg')) err.classList.add('hidden');
                }
            });

            return valid;
        }

        // â”€â”€â”€ FORM SUBMIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        document.getElementById('order-form').addEventListener('submit', function(e) {
            if (!validateForm()) {
                e.preventDefault();
                showToast('âš ï¸ Please fix the errors above before submitting.');
                // Scroll to first error
                const firstErr = document.querySelector('.border-red-400');
                if (firstErr) firstErr.scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }

            const btn = document.getElementById('submit-btn');
            btn.textContent = 'Sendingâ€¦';
            btn.disabled = true;
            btn.classList.add('opacity-70', 'cursor-not-allowed');
        });

        // Clear field errors on input
        ['name', 'email', 'event-date', 'message'].forEach(id => {
            const el = document.getElementById(id);
            el.addEventListener('input', () => {
                el.classList.remove('border-red-400');
                const err = el.nextElementSibling;
                if (err && err.classList.contains('error-msg')) err.classList.add('hidden');
            });
        });

        // â”€â”€â”€ MOBILE NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        document.getElementById('menu-toggle').addEventListener('click', () => {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('open');
            const isOpen = menu.classList.contains('open');
            document.getElementById('bar1').style.transform = isOpen ? 'translateY(8px) rotate(45deg)' : '';
            document.getElementById('bar2').style.opacity   = isOpen ? '0' : '1';
            document.getElementById('bar3').style.transform = isOpen ? 'translateY(-8px) rotate(-45deg)' : '';
            document.getElementById('bar3').style.width     = isOpen ? '24px' : '';
        });

        // â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        window.onload = () => {
            setMinDate();
            updateOrderDisplay();
        };
    </script>
    <!-- â”€â”€ WHATSAPP FLOATING BUTTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     Paste this block just before </body> on every page.
     Replace 1876XXXXXXX with your real WhatsApp number
     (include country code, no + or spaces).
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<style>
    #whatsapp-btn {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        z-index: 9998;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: #25D366;
        color: white;
        border-radius: 999px;
        padding: 0.75rem 1.25rem 0.75rem 0.9rem;
        box-shadow: 0 4px 20px rgba(37,211,102,0.4);
        font-family: 'DM Sans', sans-serif;
        font-size: 0.78rem;
        font-weight: 700;
        text-decoration: none;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        animation: wa-pop 0.5s cubic-bezier(0.34,1.56,0.64,1) 1.5s both;
    }
    #whatsapp-btn:hover {
        transform: translateY(-2px) scale(1.03);
        box-shadow: 0 8px 28px rgba(37,211,102,0.5);
    }
    #whatsapp-btn svg {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
    }
    /* Pulse ring */
    #whatsapp-btn::before {
        content: '';
        position: absolute;
        inset: -4px;
        border-radius: 999px;
        border: 2px solid #25D366;
        opacity: 0;
        animation: wa-pulse 2.5s ease-out 2s infinite;
    }
    @keyframes wa-pulse {
        0%   { transform: scale(1);   opacity: 0.6; }
        100% { transform: scale(1.18); opacity: 0; }
    }
    @keyframes wa-pop {
        from { opacity: 0; transform: translateY(20px) scale(0.8); }
        to   { opacity: 1; transform: translateY(0) scale(1); }
    }
</style>

<a id="whatsapp-btn"
   href="https://wa.me/1876XXXXXXX?text=Hi%20Creme%20Theory!%20I%27d%20like%20to%20place%20an%20order%20%F0%9F%A5%90"
   target="_blank"
   rel="noopener"
   aria-label="Chat on WhatsApp">
    <!-- WhatsApp SVG icon -->
    <svg viewBox="0 0 32 32" fill="white" xmlns="http://www.w3.org/2000/svg">
        <path d="M16 2C8.268 2 2 8.268 2 16c0 2.49.648 4.826 1.782 6.855L2 30l7.347-1.757A13.93 13.93 0 0016 30c7.732 0 14-6.268 14-14S23.732 2 16 2zm0 25.5a11.43 11.43 0 01-5.832-1.594l-.418-.248-4.361 1.043 1.074-4.25-.272-.435A11.46 11.46 0 014.5 16C4.5 9.648 9.648 4.5 16 4.5S27.5 9.648 27.5 16 22.352 27.5 16 27.5zm6.29-8.618c-.344-.172-2.036-1.004-2.352-1.118-.316-.115-.547-.172-.777.172-.23.344-.892 1.118-1.094 1.348-.2.23-.402.258-.746.086-.344-.172-1.452-.535-2.766-1.707-1.022-.912-1.712-2.038-1.912-2.382-.2-.344-.022-.53.15-.702.155-.154.344-.402.516-.603.172-.2.23-.344.344-.573.115-.23.058-.43-.028-.603-.086-.172-.777-1.874-1.064-2.566-.28-.672-.564-.58-.777-.59l-.66-.012c-.23 0-.603.086-.918.43-.316.344-1.206 1.178-1.206 2.872s1.235 3.33 1.407 3.56c.172.23 2.43 3.71 5.888 5.204.823.355 1.465.567 1.966.726.826.263 1.578.226 2.172.137.663-.099 2.036-.832 2.323-1.636.287-.804.287-1.493.2-1.636-.085-.143-.315-.23-.659-.402z"/>
    </svg>
    Order via WhatsApp
</a>
</body>
</html>

